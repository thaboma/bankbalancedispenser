# ATM withdrwal system
use http://localhost:8080/swagger-ui.html#/ to run the simple service as soon as you run the application
http://localhost:8080/h2-console to run in memory database



   4.2.4	Reporting – Find the transactional account per client with the highest balance

SELECT c.CLIENT_ID,c.SURNAME, cs.CLIENT_ACCOUNT_NUMBER,at.DESCRIPTION,ca.DISPLAY_BALANCE,MAX(ca.DISPLAY_BALANCE) AS "CLIENT_HIGHEST_BAL"
FROM CLIENT c
INNER JOIN CLIENT_ACCOUNT ca ON c.CLIENT_ID=ca.CLIENT_ID
INNER JOIN  ACCOUNT_TYPE at ON  ca.ACCOUNT_TYPE_CODE=at.ACCOUNT_TYPE_CODE
GROUP BY .CLIENT_ID,c.SURNAME, cs.CLIENT_ACCOUNT_NUMBER,at.DESCRIPTION,ca.DISPLAY_BALANCE

  4.2.5	Reporting – Calculate aggregate financial position per client
  
SELECT TITLE,NAME,SURNAME,LOAN_AMOUNT,TRANSACTIONAL_BALANCE, SUM(LOAN_AMOUNT+LOAN_AMOUNT) AS NET POSITION
FROM (
SELECT c.TITLE,c.NAME,c.SURNAME,la.LOAN_AMOUNT,ta.TRANSACTIONAL_BALANCE
FROM CLIENT c 
INNER JOIN (SELECT ca.CLIENT_ID, SUM(ca.DISPLAY_BALANCE)  AS LOAN_AMOUNT
			FROM CLIENT c,
			INNER JOIN CLIENT_ACCOUNT ca ON c.CLIENT_ID=ca.CLIENT_ID
			INNER JOIN  ACCOUNT_TYPE at ON  ca.ACCOUNT_TYPE_CODE=at.ACCOUNT_TYPE_CODE
			WHERE at.TRANSACTIONAL =0
			GROUP BY TITLE,NAME,SURNAME) la
ON c.CLIENT_ID =la.CLIENT_ID
INNER JOIN (SELECT ca.CLIENT_ID, SUM(ca.DISPLAY_BALANCE) AS TRANSACTIONAL_BALANCE
			FROM CLIENT c,
			INNER JOIN CLIENT_ACCOUNT ca ON c.CLIENT_ID=ca.CLIENT_ID
			INNER JOIN  ACCOUNT_TYPE at ON  ca.ACCOUNT_TYPE_CODE=at.ACCOUNT_TYPE_CODE
			WHERE at.TRANSACTIONAL =1
			GROUP BY TITLE,NAME,SURNAME) ta
ON c.CLIENT_ID =ta.CLIENT_ID)
)